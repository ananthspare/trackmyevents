<amplify-authenticator [signUpAttributes]="['given_name', 'family_name']">
  <ng-template amplifySlot="sign-in-header">
    <div class="auth-header">
      <h1 class="auth-title">Event Countdown App</h1>
      <p class="auth-subtitle">Track your events with categories and real-time countdowns</p>
    </div>
  </ng-template>

  <ng-template amplifySlot="sign-up-header">
    <div class="auth-header">
      <h1 class="auth-title">Event Countdown App</h1>
      <p class="auth-subtitle">Track your events with categories and real-time countdowns</p>
    </div>
  </ng-template>

  <ng-template
    amplifySlot="authenticated"
    let-user="user"
    let-signOut="signOut"
  >
    <div class="app-container">
      <header class="title-board">
        <div class="header-unified">
          <div class="nav-buttons">
            <button
              class="nav-btn"
              [class.active]="activeTab === 'categories'"
              (click)="setActiveTab('categories')">
              Categories
            </button>
            <button
              class="nav-btn"
              [class.active]="activeTab === 'calendar'"
              (click)="setActiveTab('calendar')">
              Calendar
            </button>
            <button
              class="nav-btn"
              [class.active]="activeTab === 'planner'"
              (click)="setActiveTab('planner')">
              Planner
            </button>
            <button
              class="nav-btn"
              [class.active]="activeTab === 'monthly-reminders'"
              (click)="setActiveTab('monthly-reminders')">
              Monthly Reminders
            </button>
          </div>
          <h1 class="main-title">Track your events with categories and real-time countdowns</h1>
          <div class="user-info">
            <button (click)="startTour()" class="tour-btn">Tour</button>
            <span>Hello, {{userDisplayName || 'User'}}</span>
            <button (click)="setActiveTab('profile')" class="profile-btn">Profile</button>
            <button (click)="signOut()" class="sign-out-btn">Sign Out</button>
          </div>
        </div>
        <div class="title-accent"></div>
      </header>

      <main>
        <app-categories *ngIf="activeTab === 'categories'" #categoriesRef></app-categories>
        <app-calendar *ngIf="activeTab === 'calendar'" (navigateToCategories)="navigateToEventInCategories($event.eventId, $event.categoryId)" (navigateToPlanner)="navigateToPlanner($event)"></app-calendar>
        <app-profile *ngIf="activeTab === 'profile'"></app-profile>
        <app-day-planner *ngIf="activeTab === 'planner'" #plannerRef (navigateToCategories)="navigateToEventInCategories($event.eventId, $event.categoryId)"></app-day-planner>
        <app-monthly-reminders *ngIf="activeTab === 'monthly-reminders'"></app-monthly-reminders>
      </main>

      <footer>
        <p>Â© {{currentYear}} Event Countdown App</p>
      </footer>
    </div>
    
    <app-tour></app-tour>
  </ng-template>
</amplify-authenticator>
